<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitaci칩n de San Valent칤n</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;600;700&family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            serif: ["Fraunces", "serif"],
            sans: ["Space Grotesk", "system-ui", "sans-serif"],
          },
        },
      },
    };
  </script>
  <style>
    .penguin-field {
      position: absolute;
      inset: 0;
      overflow: hidden;
      z-index: 0;
    }

    .penguin {
      position: absolute;
      cursor: pointer;
      user-select: none;
      touch-action: none;
      filter: drop-shadow(0 12px 18px rgba(7, 20, 48, 0.2));
      transition: transform 0.15s ease;
    }

    .penguin.is-bopping {
      transform: translateY(-8px);
    }

    .penguin-sprite {
      width: var(--frame-w);
      height: var(--frame-h);
      background-image: var(--sheet);
      background-repeat: no-repeat;
      background-size: var(--sheet-w) var(--sheet-h);
      background-position: 0 0;
      image-rendering: pixelated;
    }

    .penguin-bubble {
      position: absolute;
      inset: auto auto 80% 50%;
      transform: translateX(-50%);
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      color: #0b1b3a;
      font-size: 12px;
      font-weight: 600;
      opacity: 0;
      pointer-events: none;
      animation: bubble-pop 1.4s ease forwards;
    }

    @keyframes bubble-pop {
      0% {
        transform: translate(-50%, 0);
        opacity: 0;
      }
      20% {
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -18px);
        opacity: 0;
      }
    }
  </style>
</head>
<body class="min-h-screen bg-slate-950 text-slate-900">
  <div class="relative overflow-hidden">
    <div class="pointer-events-none absolute inset-0">
      <div class="absolute -left-20 top-6 h-56 w-56 rounded-full bg-sky-300/30 blur-3xl"></div>
      <div class="absolute right-0 top-0 h-64 w-64 rounded-full bg-blue-500/30 blur-3xl"></div>
      <div class="absolute bottom-0 left-1/2 h-72 w-72 -translate-x-1/2 rounded-full bg-sky-200/20 blur-3xl"></div>
    </div>

    <div id="penguin-field" class="penguin-field"></div>

    <main class="relative z-10 mx-auto w-full max-w-5xl px-4 py-10 sm:px-6">
      <section class="relative overflow-hidden rounded-3xl bg-slate-50 p-6 shadow-[0_25px_50px_rgba(7,20,48,0.25)] transition hover:-translate-y-1 hover:shadow-[0_30px_60px_rgba(7,20,48,0.3)] sm:p-8">
        <div class="absolute right-6 top-6 h-4 w-4 rotate-45 animate-pulse rounded-[4px] bg-rose-300">
          <span class="absolute -left-2 top-0 h-4 w-4 rounded-full bg-rose-300"></span>
          <span class="absolute left-0 -top-2 h-4 w-4 rounded-full bg-rose-300"></span>
        </div>
        <span class="inline-flex items-center gap-2 rounded-full bg-sky-100 px-3 py-1 text-sm font-semibold text-blue-950">
          Invitaci칩n secreta para Pablo
        </span>
        <h1 class="mt-4 font-serif text-3xl text-blue-950 sm:text-4xl">San Valent칤n con tem치tica de ping칲ino</h1>
        <p class="mt-2 text-base text-blue-800 sm:text-lg">Hola, Pablo. Soy Javi. Responde bien para desbloquear la cita.</p>
        <p class="mt-3 text-sm font-semibold uppercase tracking-wide text-blue-700">Puedes interactuar con los ping칲inos: tienen mensajes secretos y puedes arrastrarlos.</p>

        <div class="mt-6 flex justify-center">
          <div class="penguin-sprite" aria-hidden="true"></div>
        </div>

        <div id="invite" class="mt-6 hidden border-l-4 border-sky-300 pl-4">
          <h2 class="font-serif text-2xl text-blue-950">La cita est치 desbloqueada</h2>
          <div class="mt-2 grid gap-1 text-base font-semibold text-blue-800">
            <span>Fecha: 14 de febrero</span>
            <span>Hora: 21:00</span>
            <span>Lugar: Fuji Ramen, Av. de Arag칩n</span>
          </div>
          <p class="mt-4 italic text-blue-950">Te quiero游눜, Javi</p>
        </div>

        <div class="mt-8 border-t border-sky-200/60 pt-6">
          <h1 class="font-serif text-3xl text-blue-950 sm:text-4xl">Desbloquea la informaci칩n</h1>
          <p class="mt-2 text-base text-blue-800 sm:text-lg">Contesta todo correctamente para ver los detalles.</p>

          <form id="quiz" class="mt-6 grid gap-5">
          <fieldset class="grid gap-3">
            <legend class="text-sm font-semibold text-blue-950">1 - Mi animal favorito</legend>
            <div class="grid gap-2">
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q1" value="Mapache" />Mapache
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q1" value="Panda Rojo" />Panda Rojo
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q1" value="Delf칤n" />Delf칤n
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q1" value="Periquito" />Periquito
              </label>
            </div>
          </fieldset>

          <fieldset class="grid gap-3">
            <legend class="text-sm font-semibold text-blue-950">2 - Mi raza de perro favorita</legend>
            <div class="grid gap-2">
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q2" value="Golden Retriever" />Golden Retriever
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q2" value="Husky" />Husky
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q2" value="Pastor Animal" />Pastor Animal
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q2" value="Chihuahua" />Chihuahua
              </label>
            </div>
          </fieldset>

          <fieldset class="grid gap-3">
            <legend class="text-sm font-semibold text-blue-950">3 - Mi color favorito</legend>
            <div class="grid gap-2">
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q3" value="Verde" />Verde
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q3" value="Rojo" />Rojo
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q3" value="Amarillo" />Amarillo
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q3" value="Azul" />Azul
              </label>
            </div>
          </fieldset>

          <fieldset class="grid gap-3">
            <legend class="text-sm font-semibold text-blue-950">4 - Cuando nos conocimos</legend>
            <div class="grid gap-2">
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q4" value="Cumplea침os de Sof칤a" />Cumplea침os de Sof칤a
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q4" value="Cumplea침os de Alejandra" />Cumplea침os de Alejandra
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q4" value="Cumplea침os de Alba" />Cumplea침os de Alba
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q4" value="Quedada random Sof칤a, Pablo, Javi" />Quedada random Sof칤a, Pablo, Javi
              </label>
            </div>
          </fieldset>

          <fieldset class="grid gap-3">
            <legend class="text-sm font-semibold text-blue-950">5 - Qu칠 d칤a empezamos a salir</legend>
            <div class="grid gap-2">
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q5" value="23 de enero" />23 de enero.
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q5" value="23 de febrero" />23 de febrero.
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q5" value="05 de febrero" />05 de febrero.
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q5" value="10 de enero" />10 de enero.
              </label>
            </div>
          </fieldset>

          <fieldset class="grid gap-3">
            <legend class="text-sm font-semibold text-blue-950">6 - Cuando me declar칠 por primera vez</legend>
            <div class="grid gap-2">
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q6" value="21 de noviembre" />21 de noviembre
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q6" value="25 de diciembre" />25 de diciembre
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q6" value="24 de septiembre" />24 de septiembre
              </label>
              <label class="flex items-center gap-3 rounded-xl bg-sky-100/70 px-3 py-2 transition hover:-translate-y-0.5 hover:bg-sky-100">
                <input class="h-4 w-4 accent-blue-500" type="radio" name="q6" value="1 de enero" />1 de enero
              </label>
            </div>
          </fieldset>

            <button class="rounded-xl bg-blue-500 px-4 py-3 text-base font-semibold text-white transition hover:-translate-y-0.5 hover:shadow-lg" type="submit">Desbloquear</button>
          </form>
          <div id="result" class="mt-4 hidden rounded-xl bg-sky-100/70 px-4 py-3 text-base font-semibold text-blue-950"></div>
        </div>
      </section>
    </main>
  </div>

  <script>
    const quiz = document.getElementById("quiz");
    const result = document.getElementById("result");
    const invite = document.getElementById("invite");
    const penguinField = document.getElementById("penguin-field");

    const answers = {
      q1: "Panda Rojo",
      q2: "Golden Retriever",
      q3: "Verde",
      q4: "Cumplea침os de Sof칤a",
      q5: "23 de enero",
      q6: "21 de noviembre",
    };

    const sweetLines = [
      "Un besito??",
      "Te quiero",
      "Abracito",
      "Mimitos",
      "Eres mi sol",
      "Mi chico guapo",
      "Corazoncito",
      "Mi persona favorita",
      "Sonrisita",
      "M치s besos",
      "PiPu",

    ];

    const hints = {
      q1: "Pista: es un animal peque침o con cola esponjosa.",
      q2: "Pista: es una raza muy familiar y cari침osa.",
      q3: "Pista: es el color de la naturaleza.",
      q4: "Pista: fue en el cumple de una amiga en com칰n.",
      q5: "Pista: es una fecha de enero.",
      q6: "Pista: es una fecha de finales de a침o.",
    };

    quiz.addEventListener("submit", (event) => {
      event.preventDefault();
      const formData = new FormData(quiz);
      const correct = Object.keys(answers).every((key) => formData.get(key) === answers[key]);

      result.classList.remove("hidden");
      if (correct) {
        result.textContent = "Perfecto. Todo correcto, Pablo.";
        invite.classList.remove("hidden");
        result.classList.remove("bg-rose-100/70", "text-rose-900");
        result.classList.add("bg-sky-100/70", "text-blue-950");
        invite.scrollIntoView({ behavior: "smooth", block: "start" });
      } else {
        const wrongKey = Object.keys(answers).find((key) => formData.get(key) !== answers[key]);
        const hint = wrongKey ? hints[wrongKey] : "Pista: revisa tus respuestas.";
        result.textContent = `Hay alguna respuesta incorrecta. ${hint}`;
        invite.classList.add("hidden");
        result.classList.remove("bg-sky-100/70", "text-blue-950");
        result.classList.add("bg-rose-100/70", "text-rose-900");
      }
    });

    const penguins = [];
    let bounds = { width: 0, height: 0 };

    const baseFps = 60;
    const tickMs = 1000 / baseFps;
    const spriteSets = [
      {
        name: "Idle",
        file: "Idle-Anim.png",
        basePath: "Pinguino/",
        frameW: 24,
        frameH: 40,
        sheetW: 144,
        sheetH: 320,
        durations: [40, 2, 4, 4, 4, 2],
        columns: 6,
        rows: 1,
      },
      {
        name: "Hover",
        file: "Hover-Anim.png",
        basePath: "Pinguino/",
        frameW: 24,
        frameH: 48,
        sheetW: 264,
        sheetH: 384,
        durations: [3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 1],
        columns: 11,
        rows: 1,
      },
      {
        name: "Hop",
        file: "Hop-Anim.png",
        basePath: "Pinguino/",
        frameW: 24,
        frameH: 80,
        sheetW: 240,
        sheetH: 640,
        durations: [2, 1, 2, 3, 4, 4, 3, 2, 1, 2],
        columns: 10,
        rows: 1,
      },
      {
        name: "Sleep",
        file: "Sleep-Anim.png",
        basePath: "Pinguino/",
        frameW: 24,
        frameH: 24,
        sheetW: 48,
        sheetH: 24,
        durations: [30, 35],
        columns: 2,
        rows: 1,
      },
    ];

    const odiConfig = {
      name: "Odi",
      file: "Odi.png",
      basePath: "",
      frameW: 256,
      frameH: 256,
      sheetW: 1024,
      sheetH: 1024,
      durations: new Array(16).fill(5),
      columns: 4,
      rows: 4,
    };

    const clamp = (value, min, max) => Math.max(min, Math.min(max, value));

    const setBounds = () => {
      const rect = penguinField.getBoundingClientRect();
      bounds = { width: rect.width, height: rect.height };
    };


    const applySprite = (sprite, config, scale) => {
      const scaledFrameW = Math.round(config.frameW * scale);
      const scaledFrameH = Math.round(config.frameH * scale);
      const scaledSheetW = Math.round(config.sheetW * scale);
      const scaledSheetH = Math.round(config.sheetH * scale);

      sprite.style.setProperty("--frame-w", `${scaledFrameW}px`);
      sprite.style.setProperty("--frame-h", `${scaledFrameH}px`);
      sprite.style.setProperty("--sheet-w", `${scaledSheetW}px`);
      sprite.style.setProperty("--sheet-h", `${scaledSheetH}px`);
      const basePath = config.basePath || "";
      sprite.style.setProperty("--sheet", `url("${basePath}${config.file}")`);

      return { width: scaledFrameW, height: scaledFrameH };
    };

    const createPenguin = (index) => {
      const penguin = document.createElement("div");
      penguin.className = "penguin";
      penguin.setAttribute("aria-hidden", "true");

      const sprite = document.createElement("div");
      sprite.className = "penguin-sprite";
      penguin.appendChild(sprite);

      const walkConfig = spriteSets.find((sprite) => sprite.name === "Walk");
      const config = Math.random() < 0.35 && walkConfig
        ? walkConfig
        : spriteSets[index % spriteSets.length];
      const targetHeight = 120;
      const baseScale = targetHeight / config.frameH;
      const scale = clamp(baseScale * (0.9 + Math.random() * 0.5), 0.35, 3.2);
      const size = applySprite(sprite, config, scale);
      const durationsMs = config.durations.map((duration) => duration * tickMs);
      const columns = config.columns || Math.max(1, Math.floor(config.sheetW / config.frameW));

      const x = Math.random() * (bounds.width - size.width) + 10;
      const y = Math.random() * (bounds.height - size.height) + 20;
      const speed = 0.22 + Math.random() * 0.55;
      const angle = Math.random() * Math.PI * 2;

      const data = {
        el: penguin,
        x,
        y,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed,
        width: size.width,
        height: size.height,
        config,
        scale,
        frameIndex: 0,
        frameTime: 0,
        durationsMs,
        frameW: size.width,
        frameH: size.height,
        columns,
        spriteEl: sprite,
        dragging: false,
        offsetX: 0,
        offsetY: 0,
      };

      penguin.style.left = `${x}px`;
      penguin.style.top = `${y}px`;

      const bop = () => {
        penguin.classList.add("is-bopping");
        penguin.style.zIndex = "2";
        data.vx *= -1;
        data.vy *= -1;
        const nextConfig = spriteSets[Math.floor(Math.random() * spriteSets.length)];
        const nextBaseScale = targetHeight / nextConfig.frameH;
        data.scale = clamp(nextBaseScale * (0.9 + Math.random() * 0.5), 0.35, 3.2);
        const sizeUpdate = applySprite(sprite, nextConfig, data.scale);
        data.width = sizeUpdate.width;
        data.height = sizeUpdate.height;
        data.config = nextConfig;
        data.durationsMs = nextConfig.durations.map((duration) => duration * tickMs);
        data.frameIndex = 0;
        data.frameTime = 0;
        data.frameW = sizeUpdate.width;
        data.frameH = sizeUpdate.height;
        data.columns = nextConfig.columns || Math.max(1, Math.floor(nextConfig.sheetW / nextConfig.frameW));
        sprite.style.backgroundPosition = "0 0";
        const bubble = document.createElement("span");
        bubble.className = "penguin-bubble";
        bubble.textContent = sweetLines[Math.floor(Math.random() * sweetLines.length)];
        penguin.appendChild(bubble);
        setTimeout(() => {
          penguin.classList.remove("is-bopping");
          penguin.style.zIndex = "";
          bubble.remove();
        }, 900);
      };

      penguin.addEventListener("pointerdown", (event) => {
        event.preventDefault();
        data.dragging = true;
        penguin.setPointerCapture(event.pointerId);
        data.offsetX = event.clientX - data.x;
        data.offsetY = event.clientY - data.y;
        bop();
      });

      penguin.addEventListener("pointermove", (event) => {
        if (!data.dragging) return;
        data.x = clamp(event.clientX - data.offsetX, 0, bounds.width - data.width);
        data.y = clamp(event.clientY - data.offsetY, 0, bounds.height - data.height);
        penguin.style.left = `${data.x}px`;
        penguin.style.top = `${data.y}px`;
      });

      penguin.addEventListener("pointerup", () => {
        data.dragging = false;
      });

      penguin.addEventListener("pointercancel", () => {
        data.dragging = false;
      });

      const variance = 0.9 + Math.random() * 0.2;
      data.durationsMs = data.durationsMs.map((duration) => duration * variance);

      penguinField.appendChild(penguin);
      penguins.push(data);
    };


    const spawnPenguins = () => {
      penguinField.innerHTML = "";
      penguins.length = 0;
      setBounds();
      const count = Math.min(24, Math.max(12, Math.floor(bounds.width / 55)));
      for (let i = 0; i < count; i += 1) {
        createPenguin(i);
      }
    };

    let lastTime = 0;
    const updateSprite = (data, box, delta) => {
      if (data.dragging) return;
      data.x += data.vx;
      data.y += data.vy;

        if (data.x <= 0 || data.x >= box.width - data.width) {
          data.vx *= -1;
        }
        if (data.vy !== 0 && (data.y <= 0 || data.y >= box.height - data.height)) {
          data.vy *= -1;
        }

      data.x = clamp(data.x, 0, box.width - data.width);
      data.y = clamp(data.y, 0, box.height - data.height);
      data.el.style.left = `${data.x}px`;
      data.el.style.top = `${data.y}px`;
      data.spriteEl.style.transform = data.vx < 0 ? "scaleX(-1)" : "scaleX(1)";

        data.frameTime += delta;
        let guard = 0;
        while (data.frameTime >= (data.durationsMs[data.frameIndex] || 0) && guard < 5) {
          data.frameTime -= data.durationsMs[data.frameIndex] || 0;
          data.frameIndex = (data.frameIndex + 1) % data.durationsMs.length;
          const frameX = (data.frameIndex % data.columns) * data.frameW;
          const frameY = Math.floor(data.frameIndex / data.columns) * data.frameH;
          data.spriteEl.style.backgroundPosition = `-${frameX}px -${frameY}px`;
          guard += 1;
        }
    };

    const updatePenguins = (time) => {
      const delta = lastTime === 0 ? 0 : time - lastTime;
      lastTime = time;
      for (const data of penguins) {
        updateSprite(data, bounds, delta);
      }

      requestAnimationFrame(updatePenguins);
    };

    window.addEventListener("resize", () => {
      spawnPenguins();
    });

    spawnPenguins();
    requestAnimationFrame(updatePenguins);
  </script>
</body>
</html>
